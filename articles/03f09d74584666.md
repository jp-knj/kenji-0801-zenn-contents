---
title: "RSC とは何か"
emoji: "💬"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: []
published: false
---
## はじめに
RSC とは何か、ということを説明する記事です。
RSC に関する重要な用語、定義、概念を中心に簡易なリファレンスを提供します。初学者やRSCモデルの概念にこれから触れることになる読書にとって、適した情報ではないかもしれません。ご留意ください。

## RSC サバイバルガイド
### React Client Component
traditional な React コンポーネントです。ブラウザで実行されます。多くの場合、React18 や Next.js13 以前に、慣れ親しんできたコンポーネントでしょう。

> The main new concept introduced in this proposal is Server Components. In contrast, Client Components are the standard React components that developers are already familiar with: the name “Client Component” doesn’t mean anything new, it’s purely to distinguish them from Server Components.
> 
> https://github.com/reactjs/rfcs/blob/main/text/0188-server-components.md#capabilities--constraints-of-server-and-client-components

> If you have an existing client-side app, you can think of all of it as a Client Component tree.
> 
> https://github.com/reactjs/rfcs/blob/main/text/0188-server-components.md#do-i-have-to-use-this

サーバーサイドレンダリング(SSR)やビルド時の静的生成(SG)でHTMLを生成したり、ストリーミングするために React DOM Server API によってレンダリングされるかは関係はありません。

### Server Component
Server でのみ実行される React コンポーネントです。そのため、クライアントで実行されたり、hydrate されたりすることはありません。クライアントのコードと含まれたり、バンドルされることもありません。

要諦として

> React Server Components allows the server and the client (browser) to collaborate in rendering your React application. Consider the typical React element tree that is rendered for your page, which is usually composed of different React components rendering more React components. RSC makes it possible for some components in this tree to be rendered by the server, and some components to be rendered by the browser 🤯
> 
> https://www.plasmic.app/blog/how-react-server-components-work

#### React SSR との違い
React Server Components は SSR とは異なります。
簡易的にいくつかのポイントを挙げます。
サーバー上で React コンポーネントのツリーをHTMLとしてレンダリングし、ページの初期ロードに提供することを指します。この同じコンポーネントツリーは、その後クライアントで hydrate され、インタラクションができるようになります。
RSC は HTML にレンダリングされるのではなく、JSON のような形式にレンダリングされます。

RSC のパラダイムでは、すべてのコンポーネントはデフォルトで　Server Component になります。Server Component のインスタンスは一度だけ実行されるため、Server Component は React コンポーネント API　のサブセットのみを使用できます。useState, useEffect, Context.Provider, useImperativeHandle のようなクライアント専用の API は使用できません。

さらに、Server Component はクライアントコンポーネントによって、直接 import されることはありません。レンダリングされることもありません。

ですが、シリアライズされたレンダリング結果はクライアントからサーバーにフェッチされ、クライアントのコンポーネントツリー内に含まれます。

Server Component はクライアントコンポーネントをレンダリングすることもできません。
シリアライズできる props を渡せます。

- 「シリアライズ可能」なプロップとは、単純なオブジェクト、配列、文字列、数値などのJavaScriptデータ型、およびそのようなデータ型をラップするPromiseを意味しますが、例えば関数やクラスは含まれません。
