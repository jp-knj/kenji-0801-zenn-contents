---
title: "経験の浅いエンジニアはチーム開発でどう頑張ればよかったのか"
emoji: "😸"
type: "idea" # tech: 技術記事 / idea: アイデア
topics: ['チーム開発', 'コードレビュー']
published: false
---
## はじめに
ここでは、PrAha Challenge で戦術DDDやアジャイル開発手法を取り入れながら、チーム開発をした振り返りをしていこうと考えています。

### 背景
実務経験10ヶ月の時に参加させて頂きました。 Webフロントエンド領域周りで業務をしているエンジニアです。

### PrAha Challenge について
技量向上の機会を求める業務経験１〜２年程度のエンジニアに向けて、実践的な課題にチームで取り組むオンライン完結型ブートキャンプらしいです。（以下略)
https://twitter.com/dowanna6/status/1575040042480726016?s=20&t=kCgLBJq2pZg99TKo3S6ODA

## 衝突した課題 
チーム課題では、面識のないメンバー6~7人で開発することになりました。
「タックマンモデル」[^1]の形成期 [^2]と直面し、チーム開発の難しさを感じました。

チーム状況の特徴として
・チーム内には不安や緊張感がある
・お互いに遠慮があり、本音を隠している
・目標に向かってどう役割分担をして進めていくかが定まっていない
・リーダーを強く求め、リーダーからの指示を期待する

私自身には経験の浅さから発生する受け身の姿勢があり、払拭しなければなりませんでした。

メンバーの特徴として
- 技術領域は UIデザイン、フロントエンド、バックエンドや SRE領域など多様
- 業務で使用している得意な技術と今回の開発で使用する技術は異なる

チームの目標を定めなければならない、またチームメンバーがどのような能力や性格でどのように作業を進めることが有効なのか各々のメンバーが分かっていない状況です。
そして、PrAhaを通じて学習した「ドメイン駆動設計」,「TDD（テスト駆動開発）」, 「データベース設計」の知識を活かさなければなりません。

上記の状況でチーム全体でどのように具体的な行動をすればよかったのか、振り返ってみます。

## 型をつくること 
料理人は「なんとなく」でも料理を作れるようになっています。最初はレシピを読み解かなければ、作れなかった料理であっても、身体で覚えて、自然と作れるように熟達する過程があります。
その過程には「型をつくる」、そして「型を覚える」ことをするでしょう。 型は具体、言語化していくとチームのフローを形成してくれます。

思いつく方法として型を2つほど挙げます。
- 講義型 : あなた自身が責任を持って「進行役」を努めて、方向性や行動指針をドキュメントにまとめてチームに共有する方法
- 対話型 :「自分達の課題にどうように対処するか」を疑問点や課題についてチーム全員で対話する方法。

もし、講義型を選んだときのメリットは リソース効率でしょうか。初期フェーズにおいて、技術的なリーダーの存在による集権的な決定は、プロジェクトの推進力を上げてくれます。
ですが、 プロダクトコードの全体に責任をもつことを平日の夜や休日で担保するのは技術的なリーダーの負担が非常に高いでしょう。

今回のチーム開発ではプロダクトの「成果」より参加者の「成長」が優先されるので、対話型が良いのではないでしょうか

### 具体的な型の例
対話型で進めていくとして、具体な型を2つほど挙げます。
- 定例がある場合なら、以下のような形式で進める
1. 進捗報告とアイディア出し
    - プロジェクトを進行して気づいた点や浮かんだ疑問を共有。
    - 発言の心理的ハードルを軽減するため、報告する手法を複数持つ(個人へのDM、テキストチャット）
      - 2~3人ほどのグループを作成して、意見共有 →　最後に各グループ合流して意見共有
      - グループの分割は機能やユースケースごとで分割をすることを推奨する
    - 発言の準備を整える
      - 経験、学びや詰まったことを各個人が一覧にしている状態する 
      - もしできていなかった場合は、発言する前に一人で考える時間を3分設ける
2. アイデアに磨きをかける
    - 並べられた疑問や意見について、各自、意見を述べて深ぼっていく。
    - 意見交換で意識しなければならないのはメンバーへの理想の押し付けないこと。
      - 理想を考えるのはチームが向かうべきゴールへ進むのに重要ですが、独善はチームのスループットを上げれないためです。
      - 異なる意見が衝突するのは、形成期から混乱期に移行してるため、仕事に対する考え方・価値観・方針などを可能な限り話して共有すべきではないでしょうか
3. 課題に対しての対話
    - どういう現状なのか、その現状に至った過去の背景を知る、理想的な状態がどのようなものか 具体的にどのような課題があるのか
    - 課題に対してどのような解決方法があるか、解決方法が正しいかどうかを判定するための定量的指標を定義できそうか
4. 最後に
    - 実施できる手立てと影響度を一覧化する
    - 一覧化した中から、実効性が高く具体的な行動を実行する

- ライブラリやツール採用の場合なら、以下のような形式ですすめる
  1. ライブラリはどんな根拠や具象に基づいて提案されているのだろうか？
     - 技術的な根拠とビジネス上の根拠があるのか 
  2. 提案されたライブラリと現在の使用できる機能との間に重複はあるのか？
     - 具体例として、fetch api を使うか、axios を使うか
  3. 各分類に合わせて、各個人と合意形成を得る
     - 局所的な課題を解決するための場合
       - 他一人の開発者から同意を得る
         - NextUI, react-select
     - 汎用的な課題を解決するための場合 
       - 同じ分野の複数人の開発者から同意を得る
         - react-testing-library, axios
     - フレームワークを導入する場合（構造全体を構成する、影響度の大きいもの）
       - React, OpenAPI, GraphQL

## チームの構造を変える 
6~7人で合意形成を図るのは至難の業です。あるメンバーは安定して時間を確保するのが難しく、あるメンバーは時間の都合が合わないのは、よくあることです。その場合は、チームの構造を再考してみましょう。

Amazon の CEO であるジェフ・ベゾスは2015年の株主への手紙の一文。(意訳)
> But most decisions aren’t like that – they are changeable, reversible – they’re two-way doors. If you’ve made a suboptimal Type 2 decision, you don’t have to live with the consequences for that long. You can reopen the door and go back through. Type 2 decisions can and should be made quickly by high judgment individuals or small groups.
[2015年年の株主への手紙](https://s2.q4cdn.com/299287126/files/doc_financials/annual/2015-Letter-to-Shareholders.PDF)

「決定は変更可能で、可逆的です。誤った判断をした場合でもやり直したらよいのです。そのような決定をしたい場合は、判断力が高い個人か少人数のグループであるべきです。」

これは、不確実性の高い初期フェーズや 決定することに慣れていないチームであれば、小さく分断した方が良い理由の一つです。「6~7」人でチーム開発を行うのではなく、「3と4」人でチームを分割して開発するのが良かったです。

より局所的な意思決定(変数の命名、モデリング、詳細なディレクトリ構成)や適切でアドホックな意思決定（ユビキタス言語の策定、静的解析の各ルール）を問題に詳しいチームメンバーに判断を委ねることができます。また、決定が間違ったとしても、後から修正するのも容易になります。

### 実装するときは小さく試しやすい場所を探す
設計手法は戦術DDDに沿っています。 実装の詳細を隠蔽したり、契約 [^3]に従っているのです。
具体的にはクライアント、ドメイン層、永続層間での契約を前もって定義しておき、各層はAPIの契約を変更しない限り、他層に影響を与えることなく実装の詳細を変更できるようにしていました。
ですが、私はこのような設計に疎く、品質の高い成果物を生み出すことができなかったのです。

それに対して、改善策を出すとしたら、試しやすい場所で、モブプログラミング[^4]を行うことをするでしょう

ドメイン間で過度に結合された統合を分解したり、APIを完全に書き換えるのは大きな負担になります。
小さい機能(タグの追加や編集機能)やホワイトボードで思考を多く行ったり、提案された設計を図に落とすのが良いでしょう。
また、モブプログラミングでチームメンバーの創発の効果や結果（コード）だけではなく、過程や技術も共有するのが良いです。過程を共有しているので、参加者全員が対象のコードの所有権を持っているので、あとから変更しやすいです。

ここで意識しなければならないことは、コントロールフリーク（仕切り屋）になるのではなく、決定に対して各メンバーに意見を求め続けることです。
コントロールフリークは各メンバーからプログラミングの技術を奪う振る舞いになります。それは各メンバーのフラストレーションやコントロールフリークに対して敬意の欠如が発生するかもしれません。
ベストプラクティスを理解している場合でも「とりあえず、〜しておけ！」と自分の意見を押し付けるのではなくて、「〜は何を参考にしていますか？」「〜を変えたら何が起こるだろう？」と質問することで、一緒に課題を考える協調的な会話が生まれるでしょう。
なので、「How」より信頼ある情報源の「What」を示しながら「Why」を伝えていくのが良いです。技術の熟練度が高いメンバーの場合は「How」に関して、放任するのが良いと考えています。私のような技術の熟練度が低い場合は、細かく「How」に関して指摘するのがいいですし、私は嬉しいです。

[^1]:「タックマンモデル」とは心理学者のブルース・W・タックマンが1965年に提唱した、組織の成長の段階を示したモデルです。
[^2]:「タックマンモデル」の5つある段階の1つ。
[^3]: [Bertrand Meyer](https://en.wikipedia.org/wiki/Bertrand_Meyer)によって提唱されたソフトウェア設計における方法論
[^4]: 3人以上のエンジニアで1つのプログラムを書くこと