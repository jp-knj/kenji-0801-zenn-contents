---
title: ""
emoji: "📚"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: []
published: false
---
# 視認性に関するインポート
ユーザーとの対話以外にも、最初のページには表示されないコンポーネントがあることがよくあります。この良い例が、ビューポートに直接表示されないが、ユーザーがスクロールダウンしたときにのみ読み込まれるレイジーローディング画像である。

すべての画像を即座に要求しているわけではないので、最初の読み込み時間を短縮することができるのです。コンポーネントでも同じことができるのです コンポーネントが現在ビューポートにあるかどうかを知るには、IntersectionObserver APIを使用するか、react-lazyloadやreact-loadable-visibilityなどのライブラリを使用して、可視性に関するインポートをアプリケーションに素早く追加することができます。

```javascript
import React from "react";
import Send from "./icons/Send";
import Emoji from "./icons/Emoji";
import LoadableVisibility from "react-loadable-visibility/react-loadable";

const EmojiPicker = LoadableVisibility({
  loader: () => import("./EmojiPicker"),
  loading: <p id="loading">Loading</p>
});

const ChatInput = () => {
  const [pickerOpen, togglePicker] = React.useReducer(state => !state, false);

  return (
    <div className="chat-input-container">
      <input type="text" placeholder="Type a message..." />
      <Emoji onClick={togglePicker} />
      {pickerOpen && <EmojiPicker />}
      <Send />
    </div>
  );
};

console.log("ChatInput loading", Date.now());
```

ユーザーがGifボタンをクリックした後、EmojiPickerが画面に表示されるたびに、react-loadable-visibilityはEmojiPicker要素が画面上に表示されていることを検出します。このときだけ、ユーザがローディングコンポーネントのレンダリングを確認しながら、モジュールのインポートを開始します。

このフォールバックコンポーネントは、アプリケーションがフリーズしていないことをユーザーに知らせるためのもので、モジュールがロードされ、解析され、コンパイルされ、実行されるまでしばらく待つ必要があるだけです