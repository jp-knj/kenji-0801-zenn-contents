---
title: "分かった気にするStatic Import"
emoji: "📚"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["react", "javascript"]
published: false
---
# Static Import / 静的インポート
他のモジュールから`export`された関数を`import`すること

参考: [MDN Web Docs](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Statements/import)

`import`文 を使用すると、他のモジュールによってエクスポートされたコードをインポートすることができます。
デフォルトでは、静的にインポートするすべてのモジュールは、最初のバンドルに追加されます。
ES2015 のデフォルトの import 構文である `import module from 'module'` を使って import されたモジュールは、静的にインポートされます。
```javascript
import defaultExport from "module-name";
```

では、例を見てみましょう。
単純なチャット アプリには、3 つのコンポーネントを静的にインポートして描画する Chat コンポーネントが含まれています。
UserProfile、ChatList、そしてメッセージを入力・送信するための ChatInput です。
ChatInput モジュール内では、EmojiPicker コンポーネントを静的にインポートして、ユーザが絵文字をトグルすると、
絵文字ピッカーが表示されるようにしています。

```javascript
import React from "react";

import UserInfo from "./components/UserInfo";
import ChatList from "./components/ChatList";
import ChatInput from "./components/ChatInput";

import "./styles.css";

const App = () => (
  <div className="App">
    <UserInfo />
    <ChatList />
    <ChatInput />
  </div>
);

export default App;
```

modulesは、読み込みした行に到達すると即時実行されます 。

コンポーネントは静的に読み込みされているため、Webpackはmodulesはを最初のバンドルにバンドル[^1]します。ビルドした後に Webpack が生成するバンドルファイル( 複数のファイル)を見ることができます。
[^1]:バンドル（bundle）は”束にする”という意味です。

```
Asset           Size      Chunks            Chunk Names
main.bundle.js  1.5 MiB    main  [emitted]  main
```

`main.bundle.js`という1つのバンドルに束ねられます。バンドルサイズが大きいと、ユーザーのデバイスやネットワーク接続によって、Webサイトの読み込み時間に大きな影響を与える可能性があります。
`App コンポーネント`がユーザーの画面にコンテンツを表示する前に、まずすべての`modules`を読み込んで、解析する必要があります。

幸いなことに、読み込み時間を短縮する方法はたくさんあります。
たとえば、この場合の EmojiPicker のように、ユーザーとのインタラクションに基づいてのみレンダリングされるモジュールや、
ページのさらに下にレンダリングされるモジュールなどがあります。
すべてのコンポーネントを静的にインポートする代わりに、App コンポーネントがそのコンテンツをレンダリングし、ユーザーがアプリケーションと対話できるようになった後で、動的に描画したいタイミングで読み込むことができます。


