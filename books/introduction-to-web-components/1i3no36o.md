---
title: "Web Components が使われている現場へ"
---
## スタイリング

シャドウDOMはスタイルのカプセル化を提供しますが、Webコンポーネントに直接関連する多くのCSS機能があり、それらを使用する際に日常的に重要です。

現在および将来のいくつかの標準は、シャドウDOMのプレゼンテーションを作成するためにWebコンポーネントによってスタイルがどのように消費されるかに関連しています。シャドウDOMにスタイル要素を作成することは常に可能でしたが、新しい標準は改善されたエルゴノミクスとパフォーマンスの利点を提供します。

### 構築可能なスタイルシート（完全サポート）
この標準以前は、実際にCSSStyleSheetインスタンスを作成することはできなかったことをご存知ですか？この標準により、new CSSStyleSheet()というコードを書くことができるようになりました。この機能により、Webコンポーネントでのスタイルのより動的な作成と消費が可能になり、コンポーネント間でスタイルシートを共有できます。

### 採用されたスタイルシート（完全サポート）
CSSStyleSheetインスタンスがある場合、それを特定のシャドウルートまたはグローバルドキュメントにどのように関連付けるか？この新しい標準は、ドキュメントとすべてのシャドウルートインスタンスにadoptedStyleSheets配列を追加します。その配列にスタイルシートをプッシュするだけで、準備完了です。

### CSSモジュールスクリプト（Chromium）
構築可能なスタイルシートと採用されたスタイルシート自体は、ドキュメントとシートを関連付けるための生のメカニズムを提供しますが、これはまだCSS自体をJavaScriptで作成することを強制します。CSSモジュールスクリプト標準により、.cssファイルのJavaScriptモジュールインポートを使用することが可能になり、ネイティブCSSランタイムとJavaScriptランタイムの間を行き来する必要がなくなり、プラットフォームの作成によるCSSStyleSheetインスタンスが結果として得られます。

### 宣言型CSSモジュール（識別） 
宣言型シャドウDOMと採用されたスタイルシートの出現に伴い、CSSモジュールを宣言し、それらを宣言型シャドウDOMに宣言的に関連付けるためのいくつかのストローマン提案が作成されました。この分野ではさらなる探求が必要ですが、HTMLとCSSの将来にとって興味深い可能性です。

## プレゼンテーション

主に、CSSはプレゼンテーションの懸念に焦点を当てています。Webコンポーネントのスタイリングの可能性を拡大するいくつかの標準があります。

### CSSカスタムプロパティ（完全サポート） 
Webコンポーネントに固有ではありませんが、コンポーネントのシステムを作成する上で重要な側面であるカスタムCSSプロパティは、シャドウルート全体で 使用できるネイティブCSS変数を作成することを可能にするv1仕様です。

### CSSシャドウパーツ（完全サポート） 
CSSパーツは、シャドウDOM内の要素を「パーツ」として宣言し、外部からセレクタでスタイルを適用できるようにすることを可能にします。これは、part属性とネストされたシナリオのためのexportparts属性を使用して行われます。

### CSSカスタムステート（Chromium） 
ネイティブ要素は、CSSセレクタで使用できるカスタムステートを持つことができます。これの例は、チェックボックスの「チェック済み」と「未チェック」の状態です。この新機能により、Webコンポーネントは独自の状態を定義できるようになります。コンセンサスが得られ、Chromiumが最初の実装を出荷しました。これは、ElementInternalsを介してアクセスできます。他のブラウザが追いつくのを待っている間、これをポリフィルできます。

### CSSテーマ（提案） 
CSSカスタムプロパティとCSSシャドウパーツの慎重な使用により、豊富なテーマを実現できますが、CSSにテーマの概念を明示的に導入することで、これを簡素化および改善する機会があるかもしれません。

### シャドウルートのオープンスタイリング（識別） 
構築可能なスタイルシートと採用されたスタイルシートを使用して、任意のグローバルCSSをシャドウルート内で共有可能にすることは可能ですが、これは平均的なWeb開発者にとって直感的なプロセスではないかもしれません。特定のシャドウルートに外部CSSを明示的に許可するためのメカニズムを周囲でいくつか探索が行われています。